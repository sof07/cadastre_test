## Сервис приема запросов кадастрового номера

Cервис принимает запрос с указанием кадастрового номера, широты и долготы объекта, эмулирует отправку запроса на внешний сервер, который может обрабатывать запрос до 60 секунд, затем возвращает результат запроса `true` или `false`.
Данные запроса на сервер и ответ с внешнего сервера сохраняются в базу данных.

### Стэк

- FastAPI
- PostgreSQL
- SQLAlchemy
- Alembic
- Docker
- Docker Compose

### Запуск сервиса

#### <u>В корневой директории проекта переименуйте файл `env` в `.env`</u>

При необходимости измените параметры в файле:

- APP_TITLE - название сервиса
- DATABASE_URL - путь к базе данных
- POSTGRES_USER - имя пользователя БД
- POSTGRES_PASSWORD - пароль БД
- POSTGRES_DB - название БД

##### Клонируйте репозиторий:**

    git clone git@github.com:sof07/cadastre_test.git

##### Перейдите в директорию проекта

    cd cadastre_test

##### Создайте и активируйте виртуальное окружение

    python -m venv venv
    source venv\Scripts\activate

##### Установите зависимости

    pip install -r requirements.txt

##### Запустите контейнеры Docker

    docker compose up

#### Перейдите к документации Swagger

 http://localhost:8000/docs

### Эндпоинты

- "/query" - принимает кадастровый номер объекта, координаты (широта, долгота)
- "/ping" - проверка, что  сервер запустился
- "/history" - возвращает историю запросов к серверу
- /history/{cadastre_number}/ - возвращает историю запросов по кадастровому номеру
- "/result" - эндпоинт эмулируемоего сервера, который возвращает `true` или `false`
